# Модуль 4. Интеграция с внешними системами на примере Kafka Connect. Практическая работа 5. 3 ДЗ

Данный проект демонстрирует работу Kafka CDC Stack. Он включает в себя настройку коннекторов, сбор метрик и визуализацию
данных с помощью Grafana и Prometheus.

___

## Структура проекта

| Компонент                               | Описание                                                   |
|-----------------------------------------|------------------------------------------------------------|
| [Postgres](postgres)                    | База данных `practical_work_5`. Таблицы: `users`, `orders` |
| [Grafana](grafana)                      | Дашборды и настройки Grafana                               |
| [Prometheus](prometheus)                | Конфигурация Prometheus для сбора метрик                   |
| [Плагины](plugins)                      | Доступные плагины для Kafka Connect                        |
| [Конфигурации плагинов](plugins_config) | Настройки к плагинам                                       |
| [Consumer](consumer)                    | Сервис-консьюмер, для вывода данных в консоль              |
| [jmx](jmx)                              | Конфигурация JMX для сбора метрик                          |

---

## Запускаемые контейнеры

| Контейнер       | Назначение                                         |
|-----------------|----------------------------------------------------|
| Kafka (KRaft)   | 3 контроллера + 3 брокера                          |
| Kafka Connect   | Интеграция с Postgres (через Debezium)             |
| Postgres        | Источник данных (таблицы `users`, `orders`)        |
| Schema Registry | Работа с Avro-схемами                              |
| Prometheus      | Сбор метрик                                        |
| Grafana         | Дашборды по брокерам Kafka                         |
| Kafka UI        | Визуальное управление Kafka                        |
| Kafka Exporter  | Сбор метрик Kafka для Prometheus                   |
| Connector Setup | Скрипт для настройки коннекторов Kafka Connect     |
| Consumer        | Spring Boot-приложение (выводит события в консоль) |

___

## Запуск

Запустить Docker Compose, который поднимет все необходимые контейнеры:

```bash
  docker compose up --build -d
```

___

## Проверка

* Kafka UI http://localhost:8080. Здесь можно просматривать топики, сообщения.

* Schema Registry http://localhost:8081/subjects. Здесь можно просматривать схемы Avro.

* Prometheus http://localhost:9090. Здесь можно просматривать метрики, собранные с коннектора.

* Grafana http://localhost:3000. Логин/пароль по умолчанию: admin / admin. Здесь можно просматривать метрики, собранные
  с брокеров.

* Посмотреть логи consumer сервиса, который выводит события в консоль:

```bash
  docker logs consumer
```